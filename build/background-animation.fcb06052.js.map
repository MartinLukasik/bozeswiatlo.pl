{"mappings":"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","sources":["js/modules/background-animation.js","node_modules/@parcel/runtime-js/lib/runtime-5d54fc6eb31e2e31.js"],"sourcesContent":["import imgSrc from '../../img/canvas-bg.webp';\n\nconst canvas = document.getElementById('canvas');\nconst ctx = canvas.getContext('2d');\nlet width = (canvas.width = window.innerWidth);\nlet height = (canvas.height = window.innerHeight * 0.55);\nconst img = new Image();\nconst imgInfo = {};\nconst imgs = [];\nconst grids = [];\nconst magnet = 2050;\nconst mouse = {\n  x: 1,\n  y: 0,\n};\n\nexport function init() {\n  addListeners();\n\n  img.onload = function (e) {\n    // Check for firefox.\n    imgInfo.width = e.path ? e.path[0].width : e.target.width;\n    imgInfo.height = e.path ? e.path[0].height : e.target.height;\n\n    const numberToShow =\n      Math.ceil(window.innerWidth / imgInfo.width) *\n      Math.ceil(window.innerHeight / imgInfo.height);\n\n    createGrid();\n    if (window.matchMedia('(min-width: 500px)').matches) {\n      populateCanvas(numberToShow * 15);\n    }\n\n    // Image is ready and we're ready to go\n    canvas.classList.add('ready');\n    render();\n  };\n\n  return (img.src = imgSrc);\n}\n\nfunction addListeners() {\n  window.addEventListener('resize', resizeCanvas);\n  window.addEventListener('mousemove', updateMouse);\n}\n\nfunction updateMouse(e) {\n  mouse.x = e.clientX;\n  mouse.y = e.clientY;\n}\n\nfunction resizeCanvas() {\n  width = canvas.width = window.innerWidth;\n  height = canvas.height = window.innerHeight;\n}\n\n// Magic\nfunction populateCanvas(nb) {\n  let i = 0;\n  return (() => {\n    const result = [];\n    while (i <= nb) {\n      const p = new Photo();\n      imgs.push(p);\n      result.push(i++);\n    }\n    return result;\n  })();\n}\n\nfunction createGrid() {\n  const imgScale = 0.4;\n  const grid = {\n    row: Math.ceil(window.innerWidth / (imgInfo.width * imgScale)),\n    cols: Math.ceil(window.innerHeight / (imgInfo.height * imgScale)),\n    rowWidth: imgInfo.width * imgScale,\n    colHeight: imgInfo.height * imgScale,\n  };\n\n  for (\n    let r = 0, end = grid.row, asc = 0 <= end;\n    asc ? r < end : r > end;\n    asc ? r++ : r--\n  ) {\n    const x = r * grid.rowWidth;\n    for (\n      let c = 0, end1 = grid.cols, asc1 = 0 <= end1;\n      asc1 ? c < end1 : c > end1;\n      asc1 ? c++ : c--\n    ) {\n      const y = c * grid.colHeight;\n\n      const item = new gridItem(x, y, grid.rowWidth, grid.colHeight);\n      grids.push(item);\n    }\n  }\n\n  return __range__(0, grids.length, false).map((i) => grids[i].draw());\n}\n\nfunction gridItem(x, y, w, h) {\n  if (x == null) {\n    x = 0;\n  }\n  if (y == null) {\n    y = 0;\n  }\n  this.draw = function () {\n    ctx.drawImage(img, x, y, w, h);\n  };\n}\n\nfunction Photo() {\n  const seed = Math.random() * 2.5 + 1;\n  const w = imgInfo.width / seed;\n  const h = imgInfo.height / seed;\n  let x = window.innerWidth * Math.random();\n  const finalX = x;\n  let y = window.innerHeight * Math.random();\n  const finalY = y;\n  const r = Math.random() * (180 - -180) + -180;\n\n  let forceX = 0;\n  let forceY = 0;\n\n  const TO_RADIANS = Math.PI / 180;\n\n  this.update = function () {\n    const x0 = x;\n    const y0 = y;\n    const x1 = mouse.x;\n    const y1 = mouse.y;\n\n    const dx = x1 - x0;\n    const dy = y1 - y0;\n\n    const distance = Math.sqrt(dx * dx + dy * dy);\n    const powerX = x0 - ((dx / distance) * magnet) / distance;\n    const powerY = y0 - ((dy / distance) * magnet) / distance;\n\n    forceX = (forceX + (finalX - x0) / 2) / 2.1;\n    forceY = (forceY + (finalY - y0) / 2) / 2.2;\n\n    x = powerX + forceX;\n    y = powerY + forceY;\n  };\n  this.draw = () =>\n    rotateAndPaintImage(ctx, img, r * TO_RADIANS, x, y, w / 2, h / 2, w, h);\n}\n\nfunction rotateAndPaintImage(\n  context,\n  image,\n  angle,\n  positionX,\n  positionY,\n  axisX,\n  axisY,\n  widthX,\n  widthY\n) {\n  context.translate(positionX, positionY);\n  context.rotate(angle);\n  context.drawImage(image, -axisX, -axisY, widthX, widthY);\n  context.rotate(-angle);\n  return context.translate(-positionX, -positionY);\n}\n\nfunction render() {\n  let x = 0;\n  let y = 0;\n  ctx.clearRect(0, 0, width, height);\n  while (y < grids.length) {\n    grids[y].draw();\n    y++;\n  }\n  while (x < imgs.length) {\n    imgs[x].update();\n    imgs[x].draw();\n    x++;\n  }\n\n  return requestAnimationFrame(render);\n}\n\nfunction __range__(left, right, inclusive) {\n  let range = [];\n  let ascending = left < right;\n  let end = !inclusive ? right : ascending ? right + 1 : right - 1;\n  for (let i = left; ascending ? i < end : i > end; ascending ? i++ : i--) {\n    range.push(i);\n  }\n  return range;\n}\n","module.exports = require('./helpers/bundle-url').getBundleURL('3IZW2') + require('./helpers/bundle-manifest').resolve(\"1nwYg\");"],"names":["$8afe6b83f4af59cc$var$canvas","document","getElementById","$8afe6b83f4af59cc$var$ctx","getContext","$8afe6b83f4af59cc$var$width","width","window","innerWidth","$8afe6b83f4af59cc$var$height","height","innerHeight","$8afe6b83f4af59cc$var$img","Image","$8afe6b83f4af59cc$var$imgInfo","$8afe6b83f4af59cc$var$imgs","$8afe6b83f4af59cc$var$grids","$8afe6b83f4af59cc$var$mouse","x","y","$8afe6b83f4af59cc$export$2cd8252107eb640b","addEventListener","$8afe6b83f4af59cc$var$resizeCanvas","$8afe6b83f4af59cc$var$updateMouse","onload","e","path","target","nb","i","numberToShow","Math","ceil","imgScale","grid","row","cols","rowWidth","colHeight","r","end","asc","c","end1","asc1","item","$8afe6b83f4af59cc$var$gridItem","push","left","right","inclusive","range","ascending","$8afe6b83f4af59cc$var$__range__","length","map","draw","$8afe6b83f4af59cc$var$createGrid","matchMedia","matches","result","p","$8afe6b83f4af59cc$var$Photo","classList","add","$8afe6b83f4af59cc$var$render","src","$parcel$interopDefault","$6FE9F","clientX","clientY","w","h","this","drawImage","seed","random","finalX","finalY","forceX","forceY","TO_RADIANS","PI","update","x0","y0","dx","dy","distance","sqrt","image","angle","positionX","positionY","axisX","axisY","widthX","widthY","context","translate","rotate","clearRect","requestAnimationFrame","module","exports","parcelRequire","getBundleURL","resolve"],"version":3,"file":"background-animation.fcb06052.js.map"}